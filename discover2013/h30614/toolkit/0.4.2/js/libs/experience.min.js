/*!
 * HP "Experience" JavaScript
 * Created by Luke Askew <laskew@resource.com> and Nick Mele <nmele@resource.com> at Resource
 */
(function(e,t,n){"use strict";var i=t.experience={};i.version="",i.patterns={},i.modules={},t.hpe=i.patterns,i.utils={},i.objects={},i.functions={},i.properties={apiUrlBase:"https://h30629.www3.hp.com/api/1/",dimensions:{},touch:t.Modernizr?Modernizr.touch:!1,local_storage:t.Modernizr?Modernizr.localstorage:!1,errors:{not_instatiated:function(){console.log("Object not yet instantiated.")},already_instantiated:function(){console.log("Object already instantiated.")}}},i.patterns.global_header=function(o){var a=function(o){this.element=e(o),this.current_tab_index=0,this.options={model:null,attempts:0,max_attempts:5,tooltip_activator:this.element.data("tooltip-activator")||"click",locale:this.element.data("locale")||"en-us",api_url:i.properties.apiUrlBase+"header/",submenu_dismiss_delay:1e3,expand_toggle_duration:250,plus_icon:"&#xe025;",minus_icon:"&#xe021;",connecticons:["&#xe033;","&#xe041;","&#xe027;"]},this.cache={navigation:this.element.find("#global-navigation"),global_widgets:this.element.find(".header-widgets")},this.create=function(){var t=this,n=t.options.api_url+t.options.locale+"/",o=function(){e.when(t.createMainNavigation(),t.createSearchWidget(),t.createConnectWidget(),t.createCommunityWidget()).then(function(){t.cache.global_widgets.addClass("loaded"),t.activateTooltips(),t.activateExpandableLists(),i.properties.touch||t.makeAccessible()})};e.ajax({type:"GET",url:n,dataType:"jsonp",crossDomain:!0,cache:!0}).done(function(e){t.options.model=e,o()}).fail(function(){if(t.options.attempts+=1,2>=t.options.attempts&&t.options.attempts<t.options.max_attempts)t.create();else{if(!(t.options.attempts>2&&t.options.attempts<t.options.max_attempts))return!1;t.options.lang="en",t.options.cc="us",t.locale="en-us",t.create()}})},this.createMainNavigation=function(){var n,i,o=this,a=e.Deferred();i=e("<ul />",{"class":"primary-links-list"}),n=e("<div />",{"class":"carat-up left ui-sprite"});var s=function(n){var i,a;return o.current_tab_index++,n.sub_menu?(i=e("<li />",{tabindex:"-1","class":"tooltip-trigger-header",html:'<a class="primary-link text-bold cursor" tabindex="'+o.current_tab_index+'" title="'+e.trim(t.decodeURIComponent(n.link_title))+'">'+e.trim(t.decodeURIComponent(n.text))+"</a>"}),a=r(n.sub_menu)||"",i.append(a)):i=e("<li />",{html:'<a href="'+n.link+'" class="primary-link text-bold cursor" tabindex="'+o.current_tab_index+'" title="'+e.trim(t.decodeURIComponent(n.link_title))+'">'+e.trim(t.decodeURIComponent(n.text))+"</a>"}),i},r=function(i){var a,s=[];return a=e("<ul />",{"class":"header-submenu expandable-list tooltip"}).append(n.clone()),s[0]=o.options.minus_icon,s[1]=o.options.plus_icon,e.each(i,function(n,i){var r,l;o.current_tab_index++,r=e("<li />",{html:'<a class="expandable-link cursor" tabindex="'+o.current_tab_index+'"><i class="icon icon-plus-minus-small">'+s[i.expanded]+"</i>"+e.trim(t.decodeURIComponent(i.text))+"</a>"}),i.expandable_list&&(l=c(i.expandable_list,r)||"",i.expanded?(r.addClass("expanded"),l.show()):l.hide(),r.append(l)),a.append(r)}),a},c=function(n){var i=e("<ul />",{"class":"direct-links-list"});return e.each(n,function(n,a){o.current_tab_index++;var s=e("<li />",{html:'<a href="'+a.link+'" tabindex="'+o.current_tab_index+'">'+e.trim(t.decodeURIComponent(a.text))+"</a>"});i.append(s)}),i};return e.each(o.options.model.main_navigation,function(e,t){var n=s(t);i.append(n)}),o.cache.navigation.append(i[0]),o.cache.navigation_list=i,a.resolve(),a.promise()},this.createSearchWidget=function(){var t,n,i,o,a=this,s=e.Deferred(),r=a.options.model.search_widget[0];return a.current_tab_index+=1,t=e("<div />",{"class":"header-search-box lfloat"}),n=e("<form />",{action:r.action,enctype:"application/x-www-form-urlencoded",id:"searchHP",method:"get",name:"searchHP",html:'<input name="cc" type="hidden" value="'+r.cc+'" />'+'<input name="lang" type="hidden" value="'+r.lang+'" />'+'<input name="charset" type="hidden" value="'+r.charset+'" />'}),i=e("<input />",{type:"text",name:"qt","class":"header-search-box-text",tabindex:a.current_tab_index,value:r.placeholder,on:{"focusin.experience":function(){e(this).val()==r.placeholder&&e(this).val("")},"focusout.experience":function(){e(this).val()&&e(this).val()!=r.placeholder||e(this).val(r.placeholder)}}}),a.current_tab_index+=1,o=e("<button />",{type:"submit",name:"search",id:"global_search_button","class":"icon icon-magnifying-glass",tabindex:a._current_tab_index,html:"&#xe042;"}),n.append(i,[o]),t.append(n),a.cache.global_widgets.append(t),s.resolve(),s.promise()},this.createConnectWidget=function(){var n,i,o,a=this,s=e.Deferred(),r=a.options.model.connect_widget[0];if(!r.title)return s.resolve(),s.promise();var c=function(i,o){var s,r,c={};c["true"]=a.options.plus_icon,c["false"]=a.options.minus_icon,o.items?(s=e("<li />",{"class":"border-bottom-light",html:'<a class="expandable-link" tabindex="'+a.current_tab_index+'">'+'<i class="icon icon-plus-minus-small">'+c["false"]+"</i>"+'<i class="icon blue">'+a.options.connecticons[i]+"</i> "+e.trim(t.decodeURIComponent(o.text))+"</a>"}),r=l(o.items),s.append(r)):s=e("<li />",{"class":"border-bottom-light",html:'<a href="'+e.trim(t.decodeURIComponent(o.link))+'" class="expandable-link" tabindex="'+a.current_tab_index+'">'+'<i class="icon blue padding-left">'+a.options.connecticons[i]+"</i> "+e.trim(t.decodeURIComponent(o.text))+"</a>"}),n.append(s)},l=function(n){var i=e("<ul />",{"class":"no-padding margin-left direct-links-list"}).hide();return e.each(n,function(n,o){var s=e("<li />",{html:'<a href="'+o.link+'" tabindex="'+a.current_tab_index+'">'+e.trim(t.decodeURIComponent(o.text))+"</a>"});i.append(s)}),i},d=function(){i=e("<strong />",{"class":"category-title",html:e.trim(t.decodeURIComponent(r.title))}),o=e("<a />",{"class":"padding-top-small padding-left padding-right",html:e.trim(t.decodeURIComponent(r.more_link.text)),href:r.more_link.link,tabindex:a._current_tab_index}),e.each(r.list,function(e,t){a.current_tab_index+=1,c(e,t)})},p=function(){var t,s,r;t=e("<div />",{"class":"lfloat header-utility-button box-sizing visible-large connect tooltip-trigger-header"}),s=e("<button />",{"class":"button button-primary",tabindex:a.current_tab_index,html:'<i class="icon icon-contact">&#xe043;</i>'}),r=e("<div />",{"class":"tooltip padding-bottom",html:'<div class="carat-up ui-sprite" />'}),n=e("<ul />",{"class":"expandable-list no-padding-left"}),d(),a.current_tab_index+=1,r.append(i,[n,o]),t.append(s,[r]),a.cache.global_widgets.append(t)};return p(),s.resolve(),s.promise()},this.createCommunityWidget=function(){var t=this,i=e.Deferred(),o=null,a=(n.createDocumentFragment(),t.options.locale.split("-")),s="https://ssl.www8.hp.com/"+a[1]+"/"+a[0]+"/system/include/hfws/hfws_lithium.jsp?version=2&jsoncallback=?";if(!t.options.model.community_widget[0].title)return t.element.trigger("experience.global_header.community_widget.ready"),i.resolve(),i.promise();var r=function(){var n,i,a,r;n=e("<div />",{"class":"lfloat header-utility-button box-sizing visible-large community tooltip-trigger-header"}),i=e("<button />",{"class":"button button-primary",tabindex:t.current_tab_index,html:'<i class="icon icon-communities">&#xe040;</i>'}),a=e("<div />",{"class":"tooltip padding-bottom",html:'<div class="carat-up ui-sprite" />',css:{width:"400px","padding-bottom":"20px"}}),r=e("<div />",{"class":"grid-full padding-top justified-center",id:"loading_container",html:'<div class="loading loading-small"></div>'}),a.append(r),n.append(i,[a]),t.cache.global_widgets.append(n),i.one("focus mouseover",function(){e.ajax({url:s,dataType:"jsonp",cache:!0,success:function(n){if(n.communitydropdown){var i,s,p;o=c(n.communitydropdown),i=e("<strong />",{"class":"category-title margin-bottom-small",html:t.options.model.community_widget[0].title}),s=l(),p=d(),a.append(i,s,p),r.remove()}}}),e(this).off("focus mouseover")})},c=function(t){var n,i,o={};return o.content=[],o.social_links=[],n=e(t).first(),i=e(t).last(),n.find("li").each(function(t){var n=e(this),i=n.find(".hf_row2_75_25"),a=i.find("a").first(),s=i.find("p"),r=i.find("img");o.content[t]={title:a.html(),title_link:a.attr("href"),text:s.html(),image:r.attr("src")}}),i.find("li").each(function(t){var n=e(this),i=n.find("a"),a=i.find("img");o.social_links[t]={link:i.attr("href"),text:i.text(),icon:a.attr("src")}}),o},l=function(){var n=[];return e.each(o.content,function(i,o){t.current_tab_index+=1;var a;a=e("<div />",{"class":"margin-bottom-small margin-left margin-right padding-bottom-small clearfix border-bottom-light content-secondary",html:'<img src="'+o.image+'" width="85" height="85" class="rfloat margin-left-small" />'+'<a href="'+o.title_link+'" tabindex="'+t.current_tab_index+'">'+o.title+"</a>"+'<p class="no-margin-bottom">'+o.text+"</p>"}),n[i]=a}),n},d=function(){var n=[];return e.each(o.social_links,function(i,o){t.current_tab_index+=1;var a;a=e("<div />",{"class":"margin-left margin-right content-secondary",style:"padding-bottom:4px;",html:'<a href="'+o.link+'" tabindex="'+t.current_tab_index+'">'+'<img src="'+o.icon+'" style="margin: 4px 4px -2px 0;" />'+o.text+"</a>"}),n[i]=a}),n};return r(),i.resolve(),i.promise()},this.expandToggle=function(t){var n=this,i=e(t).parent();i.toggleClass("expanded"),n.toggleIcon(i),e(t).slideToggle(n.options.expand_toggle_duration)},this.toggleIcon=function(e){var t=this,n=e.find(".icon-plus-minus-small");e.hasClass("expanded")?n.html(t.options.plus_icon):n.html(t.options.minus_icon)},this.toggleExpandableList=function(t){var n=this,i=e(t).parent(),o=i.find(".direct-links-list");i.siblings(".expanded").find(".direct-links-list").each(function(){n.expandToggle(this)}),n.expandToggle(o)},this.activateExpandableLists=function(){var t=this;t.element.find(".expandable-list").each(function(){e(this).on("click.experience","li > a",function(){t.toggleExpandableList(this)})})},this.activateTooltips=function(){var n,i=this,o=function(e){var n=t.setTimeout(function(){e.parent(".tooltip-trigger-header").find(".tooltip.open").removeClass("open")},i.options.submenu_dismiss_delay);e.parent(".tooltip-trigger-header").data("timeout",n)},a=function(e){t.clearTimeout(e.parent(".tooltip-trigger-header").data("timeout"))};n="hover"==i.options.tooltip_activator?"mouseenter.experience":"click.experience",i.element.find(".tooltip-trigger-header .primary-link, .tooltip-trigger-header button").on(n,function(){var t=e(this).parent(),n=t.find(".tooltip");return n.hasClass("open")&&"hover"==i.options.tooltip_activator?!1:(t.siblings().find(".tooltip.open").removeClass("open"),n.toggleClass("open"),e(this).blur(),void 0)}).on({"mouseleave.experience":function(t){o(e(t.target))},"mouseenter.experience":function(t){a(e(t.target))}}),i.element.find(".tooltip").on({"mouseleave.experience":function(t){o(e(t.target))},"mouseenter.experience":function(t){a(e(t.target))}})},this.makeAccessible=function(){var t=this;t.element.find(".tooltip-trigger-header .primary-link, .tooltip-trigger-header button").on("keypress.experience",function(n){var i=e(this).parent().find(".tooltip");(13===n.which||32===n.which)&&(n.preventDefault(),t.element.find(".expanded > .direct-links-list").each(function(){t.expandToggle(this)}),i.hasClass("open")?i.removeClass("open"):(t.element.find(".tooltip.open").removeClass("open"),i.addClass("open")))}).end().find(".expandable-list .expandable-link").on("keypress.experience",function(e){(13===e.which||32===e.which)&&t.toggleExpandableList(this)})},this.init=function(e){var t=this;t.element.data("instantiated")||(t.create(),t.element.data({instantiated:!0,instance:e}),t.element.trigger("experience.global_header.ready"))}};return{init:function(){var t=o||".global-header";e(t,n).each(function(e,t){0===e&&(i.objects.global_header=[]),i.objects.global_header[e]=new a(t),i.objects.global_header[e].init(e)})}}},i.patterns.global_footer=function(o){var a=function(o){this.element=e(o),this.footer_menu=this.element.find("#footer-menu"),this.current_country=this.element.find(".current-country"),this.options={attempts:0,max_attempts:5,model:null,locale:this.element.data("locale")||"en-us",api_url:i.properties.apiUrlBase+"footer/",worlmap_api_url:i.properties.apiUrlBase+"worldmap/default/"},this.setCurrentCountry=function(e){var t=this,n=t.options.locale.split("-");t.current_country.html(e).css("background-image","url(https://ssl.www8.hp.com/"+n[1]+"/"+n[0]+"/images/i/footer/flag.png)")},this.bindCurrentCountryEvents=function(){var e=this;e.current_country.one("focus.experience",function(){e.createCountrySelector()}).on({"click.experience":function(t){e.toggleCountrySelector(t)},"keypress.experience":function(t){(13===t.which||32===t.which)&&e.toggleCountrySelector(t)}})},this.create=function(){var t,n=this,i=n.options.api_url+n.options.locale+"/",o=function(){t=n.options.model.country_selector[0].country,e.when(n.setCurrentCountry(t),n.createFooterMenu()).then(function(){n.activateFooterTooltips(),n.bindCurrentCountryEvents()})};e.ajax({url:i,type:"GET",dataType:"jsonp",crossDomain:!0,cache:!0}).done(function(e){n.options.model=e,o()}).fail(function(){if(n.options.attempts+=1,2>=n.options.attempts&&n.options.attempts<n.options.max_attempts)n.create();else{if(!(n.options.attempts>2&&n.options.attempts<n.options.max_attempts))return!1;n.options.lang="en",n.options.cc="us",n.locale="en-us",n.create()}})},this.createFooterMenu=function(){var i=this,o=(n.createDocumentFragment(),e.Deferred()),a=i.footer_menu,s=function(n){var i=e("<ul />",{"class":"global-footer-menu-row"});return e.each(n.footer_menu_row,function(o,a){var s,c,l="";n.footer_menu_row.length-1>o&&(l='<span class="pipe">|</span>'),c=e("<li />"),a.copyright?c.html(e.trim(t.decodeURIComponent(a.copyright))):a.tooltip_menu?(c.html('<a href="" tabindex="1002" class="tooltip-trigger-footer global-footer-link">'+e.trim(t.decodeURIComponent(a.text))+"</a>"+l),s=r(a),c.append(s)):c.html('<a href="'+e.trim(t.decodeURIComponent(a.link))+'" tabindex="1002" class="global-footer-link">'+e.trim(t.decodeURIComponent(a.text))+"</a>"+l),i.append(c)}),i},r=function(n){var i,o=[];return e.each(n.tooltip_menu,function(n,i){o.push('<li><a href="'+e.trim(t.decodeURIComponent(i.link))+'" tabindex="1002" title="'+e.trim(t.decodeURIComponent(i.text))+'">'+e.trim(t.decodeURIComponent(i.text))+"</a>"+"</li>")}),i=e("<div />",{"class":"tooltip",html:'<div class="carat-down right ui-sprite"></div><div class="global-footer-tooltip-title text-bold">'+e.trim(t.decodeURIComponent(n.text))+"</div>"+'<ul class="global-footer-tooltip-link-list">'+o.join("")+"</ul>"})};return e.each(i.options.model.footer_menu,function(e,t){var n=s(t);i.options.model.footer_menu.length-1>e&&n.addClass("hidden-small"),a.append(n)}),o.resolve(),o.promise()},this.activateFooterTooltips=function(){var t=this;t.element.find(".tooltip-trigger-footer").on({"click.experience":function(n){n.preventDefault();var i=e(this).siblings(".tooltip");t.closeFooterTooltips(i),i.addClass("open"),i.on("mouseleave.experience",function(){i.off("mouseleave.experience"),i.removeClass("open")})}})},this.closeFooterTooltips=function(){var e=this;e.element.find(".tooltip").removeClass("open")},this.createCountrySelector=function(){var t=this,n=t.element.find(".country-selector"),i=t.element.find(".global-footer-top-row");e.ajax({url:t.options.worlmap_api_url,type:"GET",dataType:"jsonp",crossDomain:!0,cache:!0}).done(function(e){n.html(e.data),i.append('<div class="body-mask"></div>'),t.element.find(".close-link, .body-mask").on({"click.experience":function(e){t.toggleCountrySelector(e)},"keypress.experience":function(e){(13===e.which||32===e.which)&&t.toggleCountrySelector(e)}})})},this.toggleCountrySelector=function(t){var i=this;i.closeFooterTooltips(),e("body").toggleClass("country-selector-open"),e(n).one("keydown",function(t){27===t.keyCode&&e("body").removeClass("country-selector-open")}),t.preventDefault()},this.init=function(e){var t=this;t.element.data("instantiated")||(t.create(),t.element.data({instantiated:!0,instance:e}),t.element.trigger("experience.global_footer.ready"))}};return{init:function(){var t=o||".global-footer";e(t,n).each(function(e,t){0===e&&(i.objects.global_footer=[]),i.objects.global_footer[e]=new a(t),i.objects.global_footer[e].init(e)})}}},i.patterns.secondary_navigation=function(t){var o=function(t){this.element=e(t),this.options={model:this.element.data("model"),http_type:this.element.data("http")||"GET",data_type:this.element.data("json")||"jsonp",locale:this.element.data("locale")||null,active_item_text:this.element.data("active-item")||null,collapsed_menu_text:this.element.data("menu-text")||"Navigation",primary_list_height:0,item_height:52},this.options.cross_domain="jsonp"===this.options.data_type,this.cache={primary_items_list:this.element.find(".secondary-navigation-item-primary")},this.create=function(){var t=this,n=e.Deferred();return t.options.model?e.ajax({type:t.options.http_type,url:t.options.model,dataType:t.options.data_type,crossDomain:t.options.cross_domain,cache:!1,success:function(n){e.when(t.build(n)).then(function(){t.bindEvents()})}}).done(function(){n.resolve()}):(t.options.active_item_text=t.element.find(".active").text(),t.element.find(".active-menu-item").text(t.options.active_item_text),t.bindEvents(),n.resolve()),n.promise()},this.build=function(t){var n,i,o,a,s=this,r=new e.Deferred;return t.lockup&&(a=e("<a />",{href:t.lockup.link,"class":"lockup",html:'<div class="lockup-title">'+t.lockup.title+"</div>"+'<div class="lockup-subtitle">'+t.lockup.subtitle+"</div>"}),s.element.before(a)),n=e("<div />",{"class":"menu",html:'<span class="active-menu-item">'+s.options.collapsed_menu_text+'</span><i class="icon icon-menu">&#xe026;</i>'}),i=e("<ul />",{"class":"secondary-navigation-item-primary"}),o=e("<div/>",{"class":"menu-carat ui-sprite"}),e.each(t.items,function(t,n){var a,r=e("<li />"),c=typeof s.options.active_item_text;if(a="object"==typeof n.text?n.text[s.options.locale]:n.text,"string"===c?s.options.active_item_text.replace(" ","").toUpperCase()===a.replace(" ","").toUpperCase()&&r.addClass("active"):"number"===c&&s.options.active_item_text===t&&r.addClass("active"),0===t&&r.addClass("alpha"),n.secondary){r.addClass("secondary-navigation-dropdown closed").html("<a>"+a+' <div class="plus-minus visible-small rfloat"><i class="icon">&#xe021;</i></div></a>');var l=e("<ul/>",{"class":"secondary-navigation-item-secondary"}).append(o.clone());e.each(n.secondary,function(t,i){var o,a=e("<li />");o="object"==typeof i.text?i.text[s.options.locale]:i.text,a.html('<a href="'+i.link+'">'+o+"</a>"),t===n.secondary.length-1&&a.addClass("omega"),l.append(a)}),r.append(l)}else r.html('<a href="'+n.link+'">'+a+"</a>");i.append(r)}),s.element.append(n,i),s.cache.primary_items_list=i,r.resolve(),r.promise()},this.openClosePrimary=function(){var e=this;e.element.toggleClass("open")},this.openCloseSecondary=function(t){var n=e(t).parent(".secondary-navigation-dropdown"),i=n.hasClass("closed");i?e(t).find(".plus-minus .icon").html("&#xe025;"):e(t).find(".plus-minus .icon").html("&#xe021;"),n.toggleClass("closed open")},this.bindEvents=function(){var e=this;e.element.on("mousedown.experience",".menu",function(t){t.preventDefault(),e.openClosePrimary()}),e.element.find(".icon-menu").on("touchstart.experience",function(t){t.preventDefault(),t.stopPropagation(),e.openClosePrimary()}),e.element.on("click.experience",".secondary-navigation-dropdown > a",function(t){t.preventDefault(),e.openCloseSecondary(this)})},this.setActive=function(t){var n,i=this,o=typeof t;if("number"===o&&(n=t),"string"===o){var a,s=[],r=t.replace(/\s+/gi,"").toUpperCase();e(".secondary-navigation-item-primary > li > a",i.element).each(function(){s.push(e(this).text().replace(/î€Ÿ|\s+/gi,"").toUpperCase())}),a=e.inArray(r,s),n=a>=0?a:0}i.element.find(".secondary-navigation-item-primary > li").eq(n).addClass("active").siblings().removeClass("active")},this.fixIE=function(){e(".secondary-navigation-dropdown").each(function(){var t=e(this).find(".secondary-navigation-item-secondary");e(this).on({mouseenter:function(){t.show()},mouseleave:function(){t.hide()}})}),e(".secondary-navigation-item-primary .active > a").addClass("ie6-active")},this.init=function(t){var n=this;n.element.data("instantiated")||(e.when(n.create()).done(function(){n.element.data({instantiated:!0,instance:t}),n.element.trigger("ready")}),e("html").hasClass("lt-ie7")&&n.element.on("ready",function(){n.fixIE()}))}};return{setActive:function(n){var o=t||".secondary-navigation";e(o).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.secondary_navigation[t].setActive(n):i.properties.errors.not_instatiated()})},init:function(){var a=t||".secondary-navigation";e(a,n).each(function(e,t){0===e&&(i.objects.secondary_navigation=[]),i.objects.secondary_navigation[e]=new o(t),i.objects.secondary_navigation[e].init(e)})}}},i.patterns.sidebar=function(t){var o=function(t){this.element=e(t),this.init=function(){var e=this,t=this.element.find(".sidebar-title"),n=t.text();t.html(n+'<div class="plus-minus"><i class="icon">&#xe021;</i></div>');var i=t.find(".plus-minus .icon");t.on("mousedown",function(t){t.preventDefault(),e.element.toggleClass("open"),e.element.hasClass("open")?i.html("&#xe025;"):i.html("&#xe021;")})}};return{create:function(){e.each(t,function(n){if(e(t).data("instantiated"))i.properties.errors.already_instantiated();else{var a=new o(this);a.init(n)}})},init:function(){var a=t||'.sidebar[data-collapse="collapse"]';e(a,n).each(function(e,t){0===e&&(i.objects.sidebars=[]),i.objects.sidebars[e]=new o(t),i.objects.sidebars[e].init(e)})}}},i.patterns.tabs=function(t){var o=function(t){this.element=e(t),this.create=function(){var t=this,n=t.element.find("li"),i=t.element.find(".tab-content"),o=t.element.find(".tab-navigation-menu"),a=t.element.find(".active").index(),s=e(i[a]).data("source");s&&e(i[a]).load(s).data("loaded","true"),e(i[a]).show(),o.find(".tab-active-item").html(e(n[a]).html()),o.on("click.experience",function(){t.element.addClass("open")}),t.element.find(".tab-navigation li").on("click.experience",function(){if(!e(this).is(".disabled")){var n=e(this).index();t.setActiveTab(n),t.element.removeClass("open")}})},this.setActiveTab=function(t){var n=this,o=n.element.find("li"),a=n.element.find(".tab-content"),s=n.element.find(".tab-navigation-menu"),r=e(a[t]).data("callback");return e(o[t]).is(".disabled")?!1:(n.loadTabContent(t),e(a[t]).show().siblings().hide(),e(o[t]).addClass("active").siblings().removeClass("active"),s.find(".tab-active-item").html(e(o[t]).html()),i.functions[r]&&i.functions[r].call(),void 0)},this.loadTabContent=function(t){var n=this,i=n.element.find(".tab-content"),o=e(i[t]).data("source");if(o){var a=e(i[t]).data("loaded");a||e(i[t]).load(o).data("loaded","true")}},this.init=function(t){var n=this;n.element.data("instantiated")||e.when(n.create()).done(function(){n.element.data({instantiated:!0,instance:t}),n.element.trigger("ready")})}};return{setActiveTab:function(n){var o=t||".tabs";e(o).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.tabs[t].setActiveTab(n):i.properties.errors.not_instatiated()})},init:function(){var a=t||".tabs";e(a,n).each(function(e,t){0===e&&(i.objects.tabs=[]),i.objects.tabs[e]=new o(t),i.objects.tabs[e].init(e)})}}},i.patterns.table=function(t){var o=function(t){this.element=e(t),this.wrap_inner=function(){e("th",this.element).each(function(){var t=e("<div>",{"class":"inner-wrap",css:{height:e(this).height(),width:"100%",position:"relative"}});e(this).wrapInner(t).addClass("pointer")})},this.highlight_column=function(){e("th",this.element).on("click",function(){var t=e(this).index();e("tr",this.element).each(function(){e("td",this).eq(t).addClass("light-gray-bg").siblings().removeClass("light-gray-bg")})})},this.init=function(e){var t=this;t.element.data("instantiated")||(t.wrap_inner(),t.highlight_column(),t.element.data({instantiated:!0,instance:e}))}};return{create:function(){e.each(t,function(n){if(e(t).data("instantiated"))i.properties.errors.already_instantiated();else{var a=new o(this);a.init(n)}})},init:function(){var a=t||'.table[data-sortable="sortable"]';e(a,n).each(function(e,t){0===e&&(i.objects.tables=[]),i.objects.tables[e]=new o(t),i.objects.tables[e].init(e)})}}},i.patterns.checkbox=function(t){var o=function(t){this.element=e(t),this.cache={input:this.element.find("input")},this.options={isChecked:this.cache.input.prop("checked")},this.create=function(){var t,n,i=this,o=i.element.find("label");t=e("<div/>",{"class":"checkbox-checker box-sizing"}),n=e("<span/>",{"class":"ui-sprite checkbox-check"}),t.append(n),o.before(t),i.options.isChecked&&i.element.addClass("checked"),i.element.on("click.experience touchstart.experience",function(t){t.preventDefault(),i.checkToggle(e(this).find("input"))}),i.cache.input.on({"focusin.experience":function(){i.element.addClass("checkbox-focus"),e(this).on("keypress",function(t){t.preventDefault(),32===t.keyCode&&i.checkToggle(e(this))})},"focusout.experience":function(){i.element.removeClass("checkbox-focus"),e(this).off("keypress")}})},this.checkToggle=function(e){var t=this;e.prop("checked")?t.uncheck():t.check()},this.check=function(){var e=this;e.cache.input.prop("checked",!0),this.element.addClass("checked")},this.uncheck=function(){var e=this;e.cache.input.prop("checked",!1),this.element.removeClass("checked")},this.refresh=function(){var e=this;e.cache.input.is(":checked")?e.element.addClass("checked"):e.element.removeClass("checked")},this.init=function(e){var t=this;t.element.data("instantiated")||(t.create(),t.element.data({instantiated:!0,instance:e}),t.element.trigger("ready"))}};return{check:function(){var n=t||".checkbox";e(n).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.checkbox[t].check():i.properties.errors.not_instatiated()})},uncheck:function(){var n=t||".checkbox";e(n).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.checkbox[t].uncheck():i.properties.errors.not_instatiated()})},refresh:function(){var n=t||".checkbox";e(n).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.checkbox[t].refresh():i.properties.errors.not_instatiated()})},init:function(){var a=t||".checkbox";e(a,n).each(function(e,t){0===e&&(i.objects.checkbox=[]),i.objects.checkbox[e]=new o(t),i.objects.checkbox[e].init(e)})}}},i.patterns.radio=function(t){var o=function(t){this.element=e(t),this.cache={input:this.element.find("input")},this.options={checked:this.cache.input.is(":checked")},this.create=function(){var t,n,i=this,o=i.element.find(".radio-label"),a=i.cache.input.attr("name");t=e("<div/>",{"class":"radio-checker box-sizing"}),n=e("<span/>",{"class":"ui-sprite radio-check"}),i.options.checked&&i.element.addClass("checked"),t.append(i.cache.input).append(n),o.before(t),i.element.attr("data-group",a),i.element.not(".disabled").on("click.experience touchstart.experience",function(){i.check(e(this))}),i.cache.input.on({"focusin.experience":function(){i.element.addClass("radio-focus")},"focusout.experience":function(){i.element.removeClass("radio-focus")}})},this.check=function(t){var n=e(t).find("input").attr("name");e(t).find("input").prop("checked",!0),e(t).addClass("checked").siblings('[data-group="'+n+'"]').removeClass("checked").find("input").prop("checked",!1)},this.init=function(e){var t=this;t.element.data("instantiated")||(t.create(),t.element.data({instantiated:!0,instance:e}),t.element.trigger("ready"))}};return{check:function(){var n=t||".radio";e(n).each(function(){var t=e(this).data("instance");void 0!==t?i.objects.radio[t].check(e(this)):i.properties.errors.not_instatiated()})},init:function(){var a=t||".radio";e(a,n).each(function(e,t){0===e&&(i.objects.radio=[]),i.objects.radio[e]=new o(t),i.objects.radio[e].init(e)})}}},i.patterns.expand_collapse=function(t){var o=function(t){this.element=e(t),this.create=function(){var t=this,n=t.element.find(".controls"),i=n.find(".plus"),o=n.find(".minus"),a=t.element.find("figure");a.each(function(){var n=e(this),i=n.find("figcaption");i.on("click",function(){n.toggleClass("open"),t.toggle_sign(n)})}),i.on("click",function(){a.each(function(){e(this).addClass("open"),t.toggle_sign(this)})}),o.on("click",function(){a.each(function(){e(this).removeClass("open"),t.toggle_sign(this)})})},this.toggle_sign=function(t){var n=e(t).find(".plus-minus .icon");e(t).hasClass("open")?n.html("&#xe025;"):n.html("&#xe021;")},this.init=function(e){var t=this;t.element.data("instantiated")||(t.create(),t.element.data({instantiated:!0,instance:e}))}};return{create:function(){e.each(t,function(n){if(e(t).data("instantiated"))i.properties.errors.already_instantiated();else{var a=new o(this);a.init(n)}})},init:function(){var a=t||".expand-collapse";e(a,n).each(function(e,t){0===e&&(i.objects.expand_collapse=[]),i.objects.expand_collapse[e]=new o(t),i.objects.expand_collapse[e].init(e)})}}},i.patterns.dropdown=function(o){function a(n){this.element=e(n),this.select=this.element.find("select"),this.options={character_limit:this.element.data("character-limit")||12,scroll_threshold:this.element.data("scroll-threshold")||4,contents_predefined:this.element.find(".dropdown-contents").length>0,update_selected_text:"update"===this.element.data("update")||this.element.is(".dropdown-default, .dropdown-filter"),mixed_content:this.element.is(".dropdown-mixed"),simple:this.element.hasClass("dropdown-simple")},this.setSelectedText=function(t){var n,i=this,o=e.Deferred(),a=t||i.element.find("option:selected").text();if(!i.options.mixed_content)return a=t?t:i.options.update_selected_text?i.element.find("option:selected").text():i.element.find("option").eq(0).text(),n=a.length>i.options.character_limit?a.substring(0,i.options.character_limit)+"...":a,i.element.find(".selected-text").text(n),o.resolve(),o.promise()},this.setSelectedOption=function(e){var t=this;t.element.find("option").eq(e).prop("selected",!0).siblings().prop("selected",!1),t.select.trigger("change.experience")},this.createDropdown=function(){var t=this,n=e.Deferred();return t.options.simple?t.createSimple():e.when(t.createContents()).then(t.attachInputEvents()),n.resolve(),n.promise()},this.createContents=function(){var t=this,n=e.Deferred();if(!i.properties.touch&&!t.options.contents_predefined){var o=t.select.find("option"),a="",s=0,r=t.element.find(".dropdown-contents");return r.length>0&&(r.remove(),t.element.off(".experience")),r=e("<ul />").attr({"class":"dropdown-contents"}),e(o).each(function(t){0!==t&&(a+="<li>"+e(this).text()+"</li>",s+=1)}),r.html(a),t.element.append(r),s>t.options.scroll_threshold&&t.initScrolling(),n.resolve(),n.promise()}},this.createSimple=function(){var t=this;t.select.on("change.experience",function(){t.setSelectedText(e(this).find("option:selected").text())})},this.initScrolling=function(){for(var t=this,n=t.element.find(".dropdown-contents"),i=n.find("li"),o=t.options.scroll_threshold,a=0;o>0;)a+=e(i[o-1]).outerHeight(),o-=1;n.css({"overflow-y":"scroll",height:a})},this.attachInputEvents=function(){var t=this,n=e.Deferred();return i.properties.touch&&!t.options.mixed_content?t.select.on("blur.experience",function(){t.selectChangeHandler()}):(t.element.not(".disabled").add(".dropdown-carat",t.element).on({"click.experience":function(){e(this).toggleClass("open")},"mouseleave.experience":function(){e(this).removeClass("open")}}),t.element.find(".dropdown-contents").not(".disabled").find("li").on({"click.experience":function(){var n=e(this).text(),i=e(this).index();t.setSelectedOption(i+1),t.selectChangeHandler(n)}})),n.resolve(),n.promise()},this.attachAccessibility=function(){var t=this,n=e.Deferred();return t.select.on({"focusin.experience":function(){t.element.addClass("focused")},"focusout.experience":function(){t.element.removeClass("focused")},"keyup.experience":function(e){13===e.which&&t.selectChangeHandler()}}),n.resolve(),n.promise()},this.selectChangeHandler=function(e){var n,i=this;i.options.update_selected_text||i.options.mixed_content?i.setSelectedText(e):(n=i.select.find("option:selected"),t.location=n.val())
},this.reset=function(){var e=this,t=e.element.find("option").eq(0);t.prop("selected",!0).siblings().prop("selected",!1),e.setSelectedText(t.text())},this.init=function(t){var n=this;n.element.data("instantiated")||(e.when(n.setSelectedText(),n.createDropdown(),n.attachAccessibility()).then(function(){n.element.data({instantiated:!0,instance:t})}),n.element.trigger("experience.dropdown.ready"))}}return{sync:function(){var t=o||".dropdown";e(t).each(function(){var t=e(this).data("instance");t!==void 0?(i.objects.dropdown[t].setSelectedText(),i.objects.dropdown[t].createDropdown()):i.properties.errors.not_instatiated()})},reset:function(){var t=o||".dropdown";e(t).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.dropdown[t].reset():i.properties.errors.not_instatiated()})},init:function(){var t=o||".dropdown";e(t,n).each(function(e,t){0===e&&(i.objects.dropdown=[]),i.objects.dropdown[e]=new a(t),i.objects.dropdown[e].init(e)})}}},i.patterns.action_dropdown=function(o){var a=function(n){this.element=e(n);var i=600;this.init=function(n){var o=this;o.element.data("instantiated")||(o.element.on({"click.experience":function(t){e(t.target).hasClass("action-dropdown-link")||e(this).toggleClass("open")},"mouseleave.experience":function(){var e=t.setTimeout(function(){o.element.removeClass("open"),t.clearTimeout(o.element.data("timeout"))},i);o.element.data("timeout",e)},"mouseenter.experience":function(){t.clearTimeout(o.element.data("timeout"))}}),o.element.data({instantiated:!0,instance:n}))}};return{create:function(){e.each(o,function(t){if(e(o).data("instantiated"))i.properties.errors.already_instantiated();else{var n=new a(this);n.init(t)}})},init:function(){var t=o||".action-dropdown";e(t,n).each(function(e,t){0===e&&(i.objects.action_dropdowns=[]),i.objects.action_dropdowns[e]=new a(t),i.objects.action_dropdowns[e].init(e)})}}},i.patterns.overlay=function(o){var a=function(o,a){this.element=e(o),this.$overlay_wrapper=e(".overlay-wrapper"),this.options={overlay_source:this.element.data("overlay-source"),modal:this.element.data("modal"),overlay_type:this.element.data("overlay-type"),overlay_wrapper:this.$overlay_wrapper||null,body_mask:e("body").find(".body-mask")||null,close_link:this.$overlay_wrapper.find(".close-link")||null,overlay_content_wrapper:this.$overlay_wrapper.find(".overlay-content-wrapper")||null,overlay_content:this.$overlay_wrapper.find(".overlay-content")||null},this.fragment=n.createDocumentFragment(),this.createOverlayNodes=function(){var t=this;t.options.body_mask=e('<div class="body-mask" />'),t.options.close_link=e('<a class="close-link"><i class="icon icon-close">&#xe000;</i></a>'),t.options.overlay_wrapper=e('<div class="overlay-wrapper" />'),t.options.overlay_content_wrapper=e('<div class="overlay-content-wrapper" />'),t.options.overlay_content=e('<div class="overlay-content"/>'),t.options.overlay_wrapper.append(t.options.overlay_content_wrapper),t.options.overlay_content_wrapper.append(t.options.close_link,[t.options.overlay_content]);var n=t.options.overlay_wrapper;return e("body").append(n).append(t.options.body_mask),n},this.loadSource=function(){var t=this;new e.Deferred,t.options.overlay_source&&t.options.overlay_content.load(t.options.overlay_source)},this.bindEvents=function(){var e=this;e.element.on("click",function(t){t.preventDefault(),e.loadSource(),e.openOverlay(),e.bindOverlayEvents()})},this.bindOverlayEvents=function(){var e=this;return e.options.modal?(e.options.close_link.hide(),void 0):(e.options.close_link.show(),e.options.body_mask.on({"click.experience":function(){e.closeOverlay()}}),e.options.close_link.on({"click.experience":function(){e.closeOverlay()}}),e.options.overlay_wrapper.on({"click.experience":function(){e.closeOverlay()}}),void 0)},this.unbindOverlayEvents=function(){var e=this;e.options.body_mask.off("click.experience"),e.options.close_link.off("click.experience"),e.options.overlay_wrapper.off("click.experience")},this.closeOverlay=function(){var t=this;e("body").removeClass("overlay-open"),t.options.overlay_content.empty(),t.unlockScrollPosition(),t.unbindOverlayEvents()},this.openOverlay=function(){var t=this;t.lockScrollPosition(),e("body").addClass("overlay-open"),t.options.overlay_content_wrapper.on("click",function(e){e.stopImmediatePropagation()})},this.lockScrollPosition=function(){var o=[n.documentElement.scrollLeft||n.body.scrollLeft,n.documentElement.scrollTop||n.body.scrollTop];e("html").data("scroll-position",o),i.properties.touch&&e(t).scrollTop(0)},this.unlockScrollPosition=function(){var n=e("html").data("scroll-position");e(t).scrollTop(n[1])},this.init=function(t){var n=this;n.element.data("instantiated")||(e(".overlay-wrapper").length||n.createOverlayNodes(),n.bindEvents(a),n.element.data({instantiated:!0,instance:t}),n.element.trigger("experience.overlay.ready"))}};return{open:function(){var t=o||".overlay-trigger";e(t).each(function(){var t=e(this).data("instance");t!==void 0?(i.objects.overlays[t].loadSource(),i.objects.overlays[t].openOverlay(),i.objects.overlays[t].bindOverlayEvents()):i.properties.errors.not_instatiated()})},close:function(){var t=o||".overlay-trigger";e(t).each(function(){var t=e(this).data("instance");t!==void 0?i.objects.overlays[t].closeOverlay():i.properties.errors.not_instatiated()})},init:function(){var t,s=o||".overlay-trigger";e(s,n).each(function(e,n){0===e&&(i.objects.overlays=[]),i.objects.overlays[e]=new a(n,t),i.objects.overlays[e].init(e)})}}},i.patterns.brightcove=function(o){var a=function(n){this.element=e(n),this.options={},this.defaults={autoStart:!0,bgcolor:"#fff",wmode:"transparent",isVid:!0,isUI:!0,dynamicStreaming:!0,includeAPI:!0,htmlFallback:!0},this.developer=this.element.data("params"),this.params=e.extend({},this.defaults,this.developer),this.player="",this.ui={},this.create=function(){var t=this,n=new e.Deferred;return t.player='<div><object class="BrightcoveExperience">',e.each(t.params,function(e,n){t.player+='<param name="'+e+'" value="'+n+'">'}),t.player+="</object></div>",n.resolve()},this.addHtml=function(){var n=this,i=new e.Deferred,o=e("<div />");return n.ui.play_button=e("<button />",{"class":"play-button play-button-large"}),n.ui.spinner=e("<div />",{"class":"loading-large"}),o.append(n.ui.play_button,n.ui.spinner),n.element.append(o),n.positionUIComponents(),e(t).on("resize.experience orientationchange.experience",function(){n.positionUIComponents()}),i.resolve()},this.positionUIComponents=function(){var e=this;e.ui.play_button.css({top:e.element.outerHeight()/2-40}),e.ui.spinner.css({top:e.element.outerHeight()/2-30})},this.attachEvents=function(){var n=this,i=new e.Deferred;return n.element.on("click.experience",".play-button",function(){n.element.addClass("video-loading"),n.element.append(n.player),t.brightcove.createExperiences(),n.element.addClass("video-loaded")}),i.resolve()},this.init=function(t){var n=this;n.element.data("instantiated")||e.when(n.create(),n.addHtml()).then(function(){n.attachEvents(),n.element.data({instantiated:!0,instance:t}),n.element.trigger("experience.brightcove.ready")})}};return{init:function(){var t=o||".brightcove";e(t,n).each(function(t,n){0===t&&(e.ajax({url:"https://sadmin.brightcove.com/js/BrightcoveExperiences.js",dataType:"script",async:!1,cache:!0}),i.objects.brightcove=[]),i.objects.brightcove[t]=new a(n),i.objects.brightcove[t].init()})}}},i.utils.tooltips=function(){e(".tooltip-trigger").on("click.experience",function(t){t.stopPropagation();var i,o,a=this,s=0,r=0,c=e(a).offset(),l=e(a).outerHeight(),d=e(a).outerWidth(),p=e(n).width(),u=0;return e(a).data("tooltip-id")?(i=e("#"+e(a).data("tooltip-id")),o=i.find(".carat-down, .carat-up"),i.appendTo(a),e(n).find(".tooltip.open").not(i).removeClass("open"),s=i.outerHeight(),r=i.outerWidth(),s+30>=c.top-e(n).scrollTop()?(o.removeClass("carat-down").addClass("carat-up"),i.css({top:l+12})):(o.addClass("carat-down").removeClass("carat-up"),i.css({top:-(12+s)})),c.left>p/2?(o.removeClass("left").addClass("right"),u=r-d/2-29,i.css({left:-u})):(o.addClass("left").removeClass("right"),u=d/2-29,i.css({left:u})),i.addClass("open"),e(n).one("click touchstart",function(){e(n).find(".tooltip.open").removeClass("open")}),void 0):!1}).on("keypress",function(t){13===t.which&&e(this).trigger("click.experience")})},i.utils.share_widget=function(){0!==e(".addthis-trigger").length&&e.getScript("http://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-5075a50e75e3d0b8",function(){t.addthis.button(".addthis-trigger",{ui_508_compliant:!0,ui_click:!0,ui_header_color:"#5A5A5A",ui_header_background:"#F2F2F2"}),e(".addthis-trigger").on("keypress",function(t){13===t.which&&e(this).click()})})},i.utils.omniture=function(){e(n).on("click","[data-omniture]",function(){var n=e(this).attr("data-omniture");t.trackMetrics("newLink",{name:n})})},i.utils.find_scrollable=function(){for(var t=0,n=arguments.length;n>t;t+=1){var i=arguments[t],o=e(i);if(o.scrollTop()>0)return i;o.scrollTop(1);var a=o.scrollTop()>0;if(o.scrollTop(0),a)return i}},i.utils.smooth_scroll=function(){var t=i.utils.find_scrollable("html","body");e(n).on("click","[data-scroll-point]",function(){var n=e(this).data("scroll-point");e(t).animate({scrollTop:n})})},i.utils.read_more_less=function(){e(n).on("click",".read-more-less .toggle",function(){e(this).parent().toggleClass("open")})},i.utils.ios_scale_bug_fix=function(){(function(e){function n(){p.setAttribute("content",m),f=!0}function i(){p.setAttribute("content",h),f=!1}function o(t){d=t.accelerationIncludingGravity,r=Math.abs(d.x),c=Math.abs(d.y),l=Math.abs(d.z),e.orientation&&180!==e.orientation||!(r>7||(l>6&&8>c||8>l&&c>6)&&r>5)?f||n():f&&i()}var a=t.navigator.userAgent;if(/iPhone|iPad|iPod/.test(t.navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(a)&&a.indexOf("AppleWebKit")>-1){var s=e.document;if(s.querySelector){var r,c,l,d,p=s.querySelector("meta[name=viewport]"),u=p&&p.getAttribute("content"),h=u+",maximum-scale=1",m=u+",maximum-scale=10",f=!0;p&&(e.addEventListener("orientationchange",n,!1),e.addEventListener("devicemotion",o,!1))}}})(t)},i.utils.placeholderPolyfill=function(){},i.utils.browser_update_prompt=function(){var e={vs:{i:6,f:3.6,o:10.6,s:4,n:9}};e.ol=t.onload,t.onload=function(){try{e.ol&&e.ol()}catch(t){}var i=n.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src","http://browser-update.org/update.js"),n.body.appendChild(i)}},i.utils.getWindowDimensions=function(){var n=function(){var n=e(t),o=n.width(),a=n.height();i.properties.dimensions.width=o,i.properties.dimensions.height=a};n(),e(t).on("resize.experience orientationchange.experience",function(){n()})},e(t).on("load.experience",function(){e.each(i.patterns,function(){this().init()}),e.each(i.utils,function(){this.call()}),e(this).trigger("experience.modules"),e(this).trigger("experience.ready")})})(jQuery,window,document);